{"version":3,"file":"js/927.dda31516.js","mappings":"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","sources":["webpack://vue-social/./node_modules/vue-loader/dist/exportHelper.js","webpack://vue-social/./src/views/NewsPage.vue","webpack://vue-social/./src/views/NewsPage.vue?a0aa","webpack://vue-social/./src/views/PostContent.vue","webpack://vue-social/./src/views/PostContent.vue?0685"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<template>\r\n  <v-container>\r\n    <v-container class=\"fixed-header\">\r\n      <v-row>\r\n        <v-col>\r\n          <v-card style=\"text-align: center\" class=\"pa-4\">\r\n            <v-btn\r\n              v-if=\"!showForm && currentUser && currentUser.isAdmin\"\r\n              color=\"primary\"\r\n              @click=\"showForm = true\"\r\n            >\r\n              Create Post\r\n            </v-btn>\r\n            <v-form\r\n              v-if=\"showForm\"\r\n              @submit.prevent=\"createPost\"\r\n              class=\"post-form\"\r\n            >\r\n              <v-text-field\r\n                v-model=\"newPostText\"\r\n                label=\"What's on your mind?\"\r\n                outlined\r\n                dense\r\n              ></v-text-field>\r\n              <v-file-input\r\n                v-model=\"newPostImage\"\r\n                label=\"Attach an image\"\r\n                outlined\r\n                dense\r\n                accept=\"image/*\"\r\n              ></v-file-input>\r\n              <v-btn type=\"submit\" color=\"primary\" :disabled=\"isCreatingPost\">\r\n                {{ isCreatingPost ? \"Posting...\" : \"Post\" }}\r\n              </v-btn>\r\n              <v-btn text @click=\"showForm = false\" class=\"cancel-btn\">\r\n                Cancel\r\n              </v-btn>\r\n            </v-form>\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n    </v-container>\r\n\r\n    <v-main>\r\n      <v-container class=\"main-content\">\r\n        <v-row>\r\n          <v-col>\r\n            <!-- Display posts -->\r\n            <div v-if=\"isLoading\">Loading posts...</div>\r\n            <div v-else-if=\"fetchError\">\r\n              Error fetching posts: {{ fetchError }}\r\n            </div>\r\n            <PostContent\r\n              v-else\r\n              v-for=\"post in news\"\r\n              :key=\"post.id\"\r\n              :post=\"post\"\r\n              :users=\"users\"\r\n            />\r\n          </v-col>\r\n        </v-row>\r\n      </v-container>\r\n    </v-main>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { db, storage, auth } from \"@/firebase.js\";\r\nimport { ref, onMounted, onBeforeUnmount } from \"vue\";\r\nimport {\r\n  collection,\r\n  onSnapshot,\r\n  query,\r\n  orderBy,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport {\r\n  uploadBytes,\r\n  getDownloadURL,\r\n  ref as storageRef,\r\n} from \"firebase/storage\";\r\nimport PostContent from \"./PostContent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    PostContent,\r\n  },\r\n  setup() {\r\n    const news = ref([]);\r\n    const users = ref({});\r\n    const isLoading = ref(true);\r\n    const fetchError = ref(null);\r\n    const newPostText = ref(\"\");\r\n    const newPostImage = ref(null);\r\n    const isCreatingPost = ref(false);\r\n    const showForm = ref(false);\r\n    const currentUser = ref(auth.currentUser);\r\n\r\n    const createPost = async () => {\r\n      if (newPostText.value.trim() === \"\") {\r\n        alert(\"Post text cannot be empty\");\r\n        return;\r\n      }\r\n      isCreatingPost.value = true;\r\n\r\n      try {\r\n        let imageUrl = null;\r\n        if (newPostImage.value) {\r\n          const imageRef = storageRef(\r\n            storage,\r\n            `news/${new Date().toISOString()}_${newPostImage.value.name}`\r\n          );\r\n          await uploadBytes(imageRef, newPostImage.value);\r\n          imageUrl = await getDownloadURL(imageRef);\r\n        }\r\n\r\n        await addDoc(collection(db, \"news\"), {\r\n          text: newPostText.value,\r\n          imageUrl: imageUrl,\r\n          createdAt: serverTimestamp(),\r\n          userId: auth.currentUser.uid, // Get actual user ID\r\n          username: auth.currentUser.displayName, // Get actual username\r\n          userPhotoURL: auth.currentUser.photoURL, // Get actual photo URL\r\n        });\r\n\r\n        newPostText.value = \"\";\r\n        newPostImage.value = null;\r\n      } catch (error) {\r\n        console.error(\"Error creating post:\", error);\r\n        alert(\"Error creating post: \" + error.message);\r\n      } finally {\r\n        isCreatingPost.value = false;\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      const postsCollection = collection(db, \"news\");\r\n      const q = query(postsCollection, orderBy(\"createdAt\", \"desc\"));\r\n\r\n      const unsubscribePosts = onSnapshot(\r\n        q,\r\n        (querySnapshot) => {\r\n          console.log(\"Fetching posts...\");\r\n          if (querySnapshot.empty) {\r\n            console.log(\"No posts found.\");\r\n          } else {\r\n            news.value = querySnapshot.docs.map((doc) => ({\r\n              id: doc.id,\r\n              ...doc.data(),\r\n            }));\r\n            console.log(\"Posts loaded:\", news.value);\r\n          }\r\n          isLoading.value = false;\r\n        },\r\n        (error) => {\r\n          fetchError.value = error.message;\r\n          console.error(\"Error fetching posts:\", error);\r\n          isLoading.value = false;\r\n        }\r\n      );\r\n\r\n      const usersCollection = collection(db, \"users\");\r\n      const unsubscribeUsers = onSnapshot(\r\n        usersCollection,\r\n        (querySnapshot) => {\r\n          console.log(\"Fetching users...\");\r\n          querySnapshot.forEach((doc) => {\r\n            users.value[doc.id] = doc.data();\r\n          });\r\n          console.log(\"Users loaded:\", users.value);\r\n        },\r\n        (error) => {\r\n          console.error(\"Error fetching users:\", error);\r\n        }\r\n      );\r\n\r\n      const unsubscribeAuth = auth.onAuthStateChanged((user) => {\r\n        currentUser.value = user;\r\n      });\r\n\r\n      onBeforeUnmount(() => {\r\n        unsubscribePosts();\r\n        unsubscribeUsers();\r\n        unsubscribeAuth();\r\n      });\r\n    });\r\n\r\n    return {\r\n      news,\r\n      users,\r\n      isLoading,\r\n      fetchError,\r\n      newPostText,\r\n      newPostImage,\r\n      createPost,\r\n      isCreatingPost,\r\n      showForm,\r\n      currentUser,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.fixed-header {\r\n  position: fixed;\r\n  top: 50px;\r\n  left: 0;\r\n  right: 8;\r\n  z-index: 10; /* Ensure the header stays on top */\r\n  background-color: white; /* Match your app's background */\r\n}\r\n\r\n.post-form {\r\n  display: flex;\r\n  flex-direction: column; /* Arrange form elements vertically */\r\n}\r\n\r\n.cancel-btn {\r\n  margin-top: 10px; /* Add spacing above the Cancel button */\r\n}\r\n\r\n.main-content {\r\n  padding-top: 16px; /* Adjust based on fixed-header height */\r\n}\r\n</style>\r\n","import { render } from \"./NewsPage.vue?vue&type=template&id=4709586d&scoped=true\"\nimport script from \"./NewsPage.vue?vue&type=script&lang=js\"\nexport * from \"./NewsPage.vue?vue&type=script&lang=js\"\n\nimport \"./NewsPage.vue?vue&type=style&index=0&id=4709586d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4709586d\"]])\n\nexport default __exports__","<template>\r\n  <v-card class=\"mb-3\">\r\n    <v-card-title class=\"d-flex align-center\">\r\n      <div v-if=\"user\">\r\n        <v-avatar class=\"mr-3\">\r\n          <img\r\n            v-if=\"user.photoURL\"\r\n            :src=\"user.photoURL\"\r\n            alt=\"Profile Picture\"\r\n            class=\"avatar-img\"\r\n          />\r\n          <img\r\n            v-else\r\n            src=\"https://firebasestorage.googleapis.com/v0/b/vuesocial-5ebd2.appspot.com/o/system-images%2Faccount.png?alt=media&token=3d774fec-20ee-487d-a027-d01bc4a7b2e0\"\r\n            alt=\"Profile Picture\"\r\n            class=\"avatar-img\"\r\n          />\r\n        </v-avatar>\r\n        <div>\r\n          <div class=\"username\">{{ user.displayName || \"Unknown User\" }}</div>\r\n          <div class=\"text--secondary\">{{ postTime }}</div>\r\n        </div>\r\n      </div>\r\n    </v-card-title>\r\n    <v-card-text class=\"post-text\">{{ post.text }}</v-card-text>\r\n    <v-img\r\n      v-if=\"post.imageUrl\"\r\n      :src=\"post.imageUrl\"\r\n      height=\"350px\"\r\n      class=\"post-image\"\r\n      contain\r\n    />\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport { computed, ref, onMounted } from \"vue\";\r\nimport { getDoc, doc } from \"firebase/firestore\";\r\nimport { db } from \"@/firebase.js\";\r\nexport default {\r\n  props: {\r\n    post: Object,\r\n    users: Object,\r\n  },\r\n  setup(props) {\r\n    const user = ref(null);\r\n\r\n    onMounted(async () => {\r\n      try {\r\n        const userDocRef = doc(db, \"users\", props.post.userId);\r\n        const userDocSnapshot = await getDoc(userDocRef);\r\n\r\n        if (userDocSnapshot.exists()) {\r\n          user.value = userDocSnapshot.data();\r\n        } else {\r\n          console.log(\"User document not found.\");\r\n          // Handle the case where the user document doesn't exist\r\n          // You might want to set a default user object or display an error message.\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching user data:\", error);\r\n        // Handle the error appropriately.\r\n      }\r\n    });\r\n\r\n    const postTime = computed(() => {\r\n      if (!props.post.createdAt) return \"Unknown time\";\r\n      const date = props.post.createdAt.toDate();\r\n      return date.toLocaleString();\r\n    });\r\n\r\n    return {\r\n      user,\r\n      postTime,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.text--secondary {\r\n  font-size: 0.8em;\r\n  color: grey;\r\n}\r\n\r\n.username {\r\n  font-size: 1rem;\r\n}\r\n\r\n.post-text {\r\n  font-size: 1.1rem;\r\n}\r\n.post-image {\r\n  max-width: 100%;\r\n}\r\n.avatar-img {\r\n  width: 32px;\r\n  height: 32px;\r\n  object-fit: cover; /* Ensure image covers the area */\r\n}\r\n</style>\r\n","import { render } from \"./PostContent.vue?vue&type=template&id=471a7364&scoped=true\"\nimport script from \"./PostContent.vue?vue&type=script&lang=js\"\nexport * from \"./PostContent.vue?vue&type=script&lang=js\"\n\nimport \"./PostContent.vue?vue&type=style&index=0&id=471a7364&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-471a7364\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","_createBlock","_component_v_container","default","_withCtx","_createVNode","class","_component_v_row","_component_v_col","_component_v_card","style","$setup","showForm","currentUser","isAdmin","_component_v_btn","color","onClick","_cache","$event","_createTextVNode","_","_createCommentVNode","_component_v_form","onSubmit","_withModifiers","createPost","_component_v_text_field","modelValue","newPostText","label","outlined","dense","_component_v_file_input","newPostImage","accept","type","disabled","isCreatingPost","_toDisplayString","text","_component_v_main","isLoading","_createElementBlock","_hoisted_1","fetchError","_hoisted_2","_Fragment","_renderList","news","post","_component_PostContent","id","users","components","PostContent","setup","ref","auth","async","value","trim","imageUrl","imageRef","storageRef","storage","Date","toISOString","name","uploadBytes","getDownloadURL","addDoc","collection","db","createdAt","serverTimestamp","userId","uid","username","displayName","userPhotoURL","photoURL","error","console","alert","message","onMounted","postsCollection","q","query","orderBy","unsubscribePosts","onSnapshot","querySnapshot","log","empty","docs","map","doc","data","usersCollection","unsubscribeUsers","forEach","unsubscribeAuth","onAuthStateChanged","user","onBeforeUnmount","__exports__","render","src","alt","_component_v_card_title","_component_v_avatar","_hoisted_3","_createElementVNode","_hoisted_4","_hoisted_5","postTime","_component_v_card_text","$props","_component_v_img","height","contain","Object","userDocRef","userDocSnapshot","getDoc","exists","computed","date","toDate","toLocaleString"],"sourceRoot":""}