"use strict";(self["webpackChunkvue_social"]=self["webpackChunkvue_social"]||[]).push([[169],{8169:function(e,a,l){l.r(a),l.d(a,{default:function(){return c}});l(4114);var s=l(641),i=l(953),o=l(2780),n=l(1884),r=l(5220);const t={class:"text-center mt-2"};var u={__name:"RegisterPage",setup(e){const a=(0,n.aU)(),l=(0,o.xI)(),u=(0,r.rd)(),d=(0,i.KR)(""),c=(0,i.KR)(""),m=(0,i.KR)(""),v=(0,i.KR)(!1),g=(0,i.KR)(null),p=(0,i.KR)(null),f=(0,i.KR)(null),w=async()=>{g.value=null,p.value=null,f.value=null,v.value=!0;try{const e=(0,n.H9)(a,"usernames",m.value),s=await(0,n.x7)(e);if(s.exists())return f.value="Username is already taken.",void(v.value=!1);const i=await(0,o.eJ)(l,d.value,c.value),r=i.user;await(0,o.r7)(r,{displayName:m.value}),await(0,n.BN)((0,n.H9)(a,"users",r.uid),{displayName:m.value,email:d.value,bio:"",photoURL:null,isAdmin:!1}),await(0,n.BN)(e,{uid:r.uid}),u.push({name:"Home"})}catch(e){"auth/email-already-in-use"===e.code?g.value="Email is already in use.":"auth/invalid-email"===e.code?g.value="Invalid email format.":"auth/weak-password"===e.code?p.value="Password is too weak.":alert("Error registering: "+e.message)}finally{v.value=!1}},b=async()=>{const e=new o.HF;try{const l=await(0,o.df)((0,o.xI)(),e),s=l.user,i=(0,n.H9)(a,"users",s.uid),r=await(0,n.x7)(i);if(r.exists()){const e=r.data();s.isAdmin=e.isAdmin}else{const e=s.displayName?s.displayName:s.email;await(0,n.BN)(i,{displayName:e,bio:"",photoURL:s.photoURL,isAdmin:!1,email:s.email});const l=await(0,n.x7)(i),o=l.data();s.isAdmin=o.isAdmin,await(0,n.BN)((0,n.H9)(a,"usernames",s.displayName),{uid:s.uid})}u.push({name:"Home"})}catch(l){console.error("Google sign-up error:",l),alert("Error signing up with Google: "+l.message)}},h=()=>{const e=new o.LD("microsoft.com");(0,o.df)((0,o.xI)(),e).then((async e=>{const l=e.user;console.log("Microsoft sign-in successful:",l);const s=(0,n.H9)(a,"users",l.uid),i=await(0,n.x7)(s);i.exists()||await(0,n.BN)(s,{displayName:l.displayName,bio:"",isAdmin:!1});const o=i.data();l.isAdmin=o.isAdmin,u.push({name:"Home"})})).catch((e=>{console.error("Microsoft sign-in error:",e),alert("Error signing in with Microsoft: "+e.message)}))};return(e,a)=>{const l=(0,s.g2)("v-text-field"),i=(0,s.g2)("v-container"),o=(0,s.g2)("v-divider"),n=(0,s.g2)("v-spacer"),r=(0,s.g2)("v-icon"),u=(0,s.g2)("v-btn"),y=(0,s.g2)("v-card-actions"),k=(0,s.g2)("router-link"),F=(0,s.g2)("v-card");return(0,s.uX)(),(0,s.Wv)(F,{class:"mx-auto","max-width":"344",title:"User Registration"},{default:(0,s.k6)((()=>[(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),color:"primary",label:"Email","error-messages":g.value,variant:"underlined"},null,8,["modelValue","error-messages"]),(0,s.bF)(l,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=e=>c.value=e),type:"password",color:"primary",label:"Password",placeholder:"Enter your password",variant:"underlined","error-messages":p.value},null,8,["modelValue","error-messages"]),(0,s.bF)(l,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e),color:"primary",label:"Username","error-messages":f.value,variant:"underlined"},null,8,["modelValue","error-messages"])])),_:1}),(0,s.bF)(o),(0,s.bF)(y,null,{default:(0,s.k6)((()=>[(0,s.bF)(n),(0,s.bF)(u,{color:"success",loading:v.value,onClick:w},{default:(0,s.k6)((()=>[(0,s.eW)(" Complete Registration "),(0,s.bF)(r,{icon:"mdi-chevron-right",end:""})])),_:1},8,["loading"])])),_:1}),(0,s.Lk)("div",t,[(0,s.bF)(k,{to:{name:"SignIn"}},{default:(0,s.k6)((()=>[(0,s.eW)("Already have an account? Sign in")])),_:1})]),(0,s.bF)(o,{class:"mt-4"}),(0,s.bF)(y,{class:"mt-4"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{icon:"mdi-google"}),(0,s.bF)(u,{onClick:b},{default:(0,s.k6)((()=>[(0,s.eW)("Sign Up with Google")])),_:1})])),_:1}),(0,s.bF)(y,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{icon:"mdi-microsoft"}),(0,s.bF)(u,{onClick:h},{default:(0,s.k6)((()=>[(0,s.eW)("Sign Up with Microsoft")])),_:1})])),_:1})])),_:1})}}};const d=u;var c=d}}]);
//# sourceMappingURL=169.72f28fba.js.map