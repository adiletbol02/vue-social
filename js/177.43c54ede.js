"use strict";(self["webpackChunkvue_social"]=self["webpackChunkvue_social"]||[]).push([[177],{4177:function(e,a,o){o.r(a),o.d(a,{default:function(){return d}});o(4114);var s=o(641),n=o(953),i=o(2780),r=o(5220),l=o(1884);const t={class:"text-center mt-2"};var u={__name:"SignInPage",setup(e){const a=(0,l.aU)(),o=(0,r.rd)(),u=(0,n.KR)(""),c=(0,n.KR)(""),d=(0,n.KR)(null),m=(0,n.KR)(null),g=async()=>{d.value=null,m.value=null;try{const e=await(0,i.x9)((0,i.xI)(),u.value,c.value),s=e.user,n=(0,l.H9)(a,"users",s.uid),r=await(0,l.x7)(n);r.exists()?s.isAdmin=r.data().isAdmin:console.error("User document not found in Firestore"),o.push({name:"Home"})}catch(e){console.log("Error during sign in:",e.code),"auth/invalid-email"===e.code?d.value="Invalid email format.":"auth/user-not-found"===e.code?d.value="No account with that email was found.":"auth/wrong-password"===e.code?m.value="Incorrect password.":(console.error("Firebase sign-in error:",e),m.value="Incorrect email or password")}},v=async()=>{const e=new i.HF;try{const s=await(0,i.df)((0,i.xI)(),e),n=s.user,r=(0,l.H9)(a,"users",n.uid),t=await(0,l.x7)(r);if(t.exists()){const e=t.data();n.isAdmin=e.isAdmin}else{const e=n.displayName?n.displayName:n.email;await(0,l.BN)(r,{displayName:e,bio:"",photoURL:n.photoURL,isAdmin:!1,email:n.email});const o=await(0,l.x7)(r),s=o.data();n.isAdmin=s.isAdmin,await(0,l.BN)((0,l.H9)(a,"usernames",n.displayName),{uid:n.uid})}o.push({name:"Home"})}catch(s){console.error("Google sign-up error:",s),alert("Error signing up with Google: "+s.message)}},f=()=>{const e=new i.LD("microsoft.com");(0,i.df)((0,i.xI)(),e).then((async e=>{const s=e.user;console.log("Microsoft sign-in successful:",s);const n=(0,l.H9)(a,"users",s.uid),i=await(0,l.x7)(n);i.exists()||await(0,l.BN)(n,{displayName:s.displayName,bio:"",isAdmin:!1}),o.push({name:"Home"})})).catch((e=>{console.error("Microsoft sign-in error:",e),alert("Error signing in with Microsoft: "+e.message)}))};return(e,a)=>{const o=(0,s.g2)("v-text-field"),n=(0,s.g2)("v-container"),i=(0,s.g2)("v-divider"),r=(0,s.g2)("v-spacer"),l=(0,s.g2)("v-icon"),p=(0,s.g2)("v-btn"),w=(0,s.g2)("v-card-actions"),h=(0,s.g2)("router-link"),b=(0,s.g2)("v-card");return(0,s.uX)(),(0,s.Wv)(b,{class:"mx-auto","max-width":"344",title:"Sign In"},{default:(0,s.k6)((()=>[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(o,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),color:"primary",label:"Email",variant:"underlined","error-messages":d.value},null,8,["modelValue","error-messages"]),(0,s.bF)(o,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=e=>c.value=e),type:"password",color:"primary",label:"Password",placeholder:"Enter your password",variant:"underlined","error-messages":m.value},null,8,["modelValue","error-messages"])])),_:1}),(0,s.bF)(i),(0,s.bF)(w,null,{default:(0,s.k6)((()=>[(0,s.bF)(r),(0,s.bF)(p,{color:"success",onClick:g},{default:(0,s.k6)((()=>[(0,s.eW)(" Sign In "),(0,s.bF)(l,{icon:"mdi-chevron-right",end:""})])),_:1})])),_:1}),(0,s.Lk)("div",t,[(0,s.bF)(h,{to:{name:"Register"}},{default:(0,s.k6)((()=>[(0,s.eW)("Don't have an account? Register")])),_:1})]),(0,s.bF)(i,{class:"mt-4"}),(0,s.bF)(w,{class:"mt-4"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{icon:"mdi-google"}),(0,s.bF)(p,{onClick:v},{default:(0,s.k6)((()=>[(0,s.eW)("Sign In with Google")])),_:1})])),_:1}),(0,s.bF)(w,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{icon:"mdi-microsoft"}),(0,s.bF)(p,{onClick:f},{default:(0,s.k6)((()=>[(0,s.eW)("Sign In with Microsoft")])),_:1})])),_:1})])),_:1})}}};const c=u;var d=c}}]);
//# sourceMappingURL=177.43c54ede.js.map